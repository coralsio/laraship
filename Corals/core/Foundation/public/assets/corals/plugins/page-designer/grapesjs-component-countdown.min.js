/*! grapesjs-component-countdown - 0.1.3 */
!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("grapesjs")):"function"==typeof define&&define.amd?define(["grapesjs"],n):"object"==typeof exports?exports["grapesjs-component-countdown"]=n(require("grapesjs")):e["grapesjs-component-countdown"]=n(e.grapesjs)}(this,function(e){return function(e){function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}var t={};return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=1)}([function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.countdownRef="countdown"},function(e,n,t){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var a=t(2),d=o(a),s=t(3),l=o(s),r=t(4),i=o(r),c=t(0);n.default=d.default.plugins.add("gjs-component-countdown",function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n,o={blocks:[c.countdownRef],defaultStyle:!0,startTime:"",endText:"EXPIRED",dateInputType:"date",countdownClsPfx:"countdown",labelCountdown:"Countdown",labelCountdownCategory:"Extra",labelDays:"days",labelHours:"hours",labelMinutes:"minutes",labelSeconds:"seconds"};for(var a in o)a in t||(t[a]=o[a]);(0,l.default)(e,t),(0,i.default)(e,t)})},function(n,t){n.exports=e},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e};n.default=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n,a=e.DomComponents,d=a.getType("default"),s=a.getType("text"),l=d.model,r=d.view,i=(s.model,s.view,t.countdownClsPfx);a.addType("countdown",{model:l.extend({defaults:o({},l.prototype.defaults,{startfrom:t.startTime,endText:t.endText,droppable:!1,traits:[{label:"Start",name:"startfrom",changeProp:1,type:t.dateInputType},{label:"End text",name:"endText",changeProp:1}],script:function(){var e=new Date("{[ startfrom ]}").getTime(),n=this.querySelector("[data-js=countdown]"),t=this.querySelector("[data-js=countdown-endtext]"),o=this.querySelector("[data-js=countdown-day]"),a=this.querySelector("[data-js=countdown-hour]"),d=this.querySelector("[data-js=countdown-minute]"),s=this.querySelector("[data-js=countdown-second]"),l=this.gjs_countdown_interval;l&&l&&clearInterval(l);var r=function(e,n,t,l){o.innerHTML=e<10?"0"+e:e,a.innerHTML=n<10?"0"+n:n,d.innerHTML=t<10?"0"+t:t,s.innerHTML=l<10?"0"+l:l},i=function(){var o=(new Date).getTime(),a=e-o,d=Math.floor(a/864e5),s=Math.floor(a%864e5/36e5),l=Math.floor(a%36e5/6e4),i=Math.floor(a%6e4/1e3);r(d,s,l,i),a<0&&(clearInterval(c),t.innerHTML="{[ endText ]}",n.style.display="none",t.style.display="")};if(e){var c=setInterval(i,1e3);this.gjs_countdown_interval=c,t.style.display="none",n.style.display="",i()}else r(0,0,0,0)}})},{isComponent:function(e){if(e.getAttribute&&"countdown"==e.getAttribute("data-gjs-type"))return{type:"countdown"}}}),view:r.extend({init:function(){this.listenTo(this.model,"change:startfrom change:endText",this.updateScript);var e=this.model.get("components");e.length||(e.reset(),e.add('\n            <span data-js="countdown" class="'+i+'-cont">\n              <div class="'+i+'-block">\n                <div data-js="countdown-day" class="'+i+'-digit"></div>\n                <div class="'+i+'-label">'+t.labelDays+'</div>\n              </div>\n              <div class="'+i+'-block">\n                <div data-js="countdown-hour" class="'+i+'-digit"></div>\n                <div class="'+i+'-label">'+t.labelHours+'</div>\n              </div>\n              <div class="'+i+'-block">\n                <div data-js="countdown-minute" class="'+i+'-digit"></div>\n                <div class="'+i+'-label">'+t.labelMinutes+'</div>\n              </div>\n              <div class="'+i+'-block">\n                <div data-js="countdown-second" class="'+i+'-digit"></div>\n                <div class="'+i+'-label">'+t.labelSeconds+'</div>\n              </div>\n            </span>\n            <span data-js="countdown-endtext" class="'+i+'-endtext"></span>\n          '))}})})}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n,a=e.BlockManager,d=t.countdownClsPfx,s=t.defaultStyle?"<style>\n    ."+d+" {\n      text-align: center;\n      font-family: Helvetica, serif;\n    }\n\n    ."+d+"-block {\n      display: inline-block;\n      margin: 0 10px;\n      padding: 10px;\n    }\n\n    ."+d+"-digit {\n      font-size: 5rem;\n    }\n\n    ."+d+"-endtext {\n      font-size: 5rem;\n    }\n\n    ."+d+"-cont,\n    ."+d+"-block {\n      display: inline-block;\n    }\n  </style>":"";t.blocks.indexOf(o.countdownRef)>=0&&a.add(o.countdownRef,{label:t.labelCountdown,category:t.labelCountdownCategory,attributes:{class:"fa fa-clock-o"},content:'\n        <div class="'+d+'" data-gjs-type="countdown"></div>\n        '+s+"\n      "})};var o=t(0)}])});